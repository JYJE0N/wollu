# 텍스트 렌더러 개선 명세서

## 1. 개요
타자연습 애플리케이션의 텍스트 렌더링 시스템을 사용자 경험 중심으로 개선

## 2. 현재 상태 분석

### 2.1 기존 구현체
- **TypingEngine**: 이중 레이어 렌더링, 한글 IME 지원
- **EnhancedTypingPractice**: 애니메이션 중심, 단일 레이어
- **SimpleTypingPractice**: 기본 렌더링

### 2.2 주요 문제점
- 현재 타이핑 위치 표시 불명확
- 한글 조합 표시 비일관성
- 오타 피드백 약함
- 글자 간격 좁음

## 3. 개선 사항

### 3.1 즉시 적용 (Phase 1)

#### 3.1.1 타이핑 커서 개선
- **목표**: 현재 타이핑 위치를 명확히 표시
- **구현**:
  - 깜빡이는 수직 커서 추가
  - 현재 글자 하이라이트 강화
  - 스케일 애니메이션 적용

#### 3.1.2 가독성 향상
- **목표**: 글자 구분을 명확하게
- **구현**:
  - letter-spacing: 0.05em 적용
  - 한글의 경우 0.1em로 증가
  - 단어 단위 미세 간격 추가

#### 3.1.3 오타 피드백 강화
- **목표**: 실수를 즉각적으로 인지
- **구현**:
  - 오타 시 붉은색 진동 효과
  - 틀린 글자 shake 애니메이션
  - 오류음 효과 (선택적)

### 3.2 중기 적용 (Phase 2)

#### 3.2.1 한글 조합 통일
- **목표**: 모든 컴포넌트에서 일관된 한글 입력 경험
- **구현**:
  - 공통 useHangulComposition 훅 생성
  - 조합 중인 글자 파란색 밑줄 표시
  - 자음/모음 단계별 표시

#### 3.2.2 성능 최적화
- **목표**: 긴 텍스트에서도 부드러운 렌더링
- **구현**:
  - React.memo로 글자별 메모이제이션
  - useMemo로 계산 최적화
  - 가상 스크롤링 (1000자 이상)

#### 3.2.3 진행 상태 시각화
- **목표**: 전체 진행 상황 한눈에 파악
- **구현**:
  - 상단 진행바 개선
  - 문단별 체크포인트
  - 미니맵 네비게이션

### 3.3 장기 적용 (Phase 3)

#### 3.3.1 접근성
- ARIA 라벨 추가
- 스크린 리더 지원
- 고대비 모드

#### 3.3.2 반응형 디자인
- 모바일 최적화
- 동적 폰트 크기
- 터치 입력 지원

## 4. 기술 스펙

### 4.1 공통 컴포넌트 구조
```typescript
interface TextRendererProps {
  text: string;
  userInput: string;
  currentIndex: number;
  isComposing?: boolean;
  composingChar?: string;
  errors?: Record<number, boolean>;
}
```

### 4.2 스타일 가이드
```css
/* 기본 텍스트 */
.typing-char {
  letter-spacing: 0.05em;
  transition: all 0.2s ease;
}

/* 한글 텍스트 */
.typing-char-korean {
  letter-spacing: 0.1em;
}

/* 현재 위치 */
.current-char {
  background: rgba(59, 130, 246, 0.2);
  border-bottom: 3px solid #3b82f6;
  transform: scale(1.1);
}

/* 오타 */
.error-char {
  background: #ef4444;
  color: white;
  animation: shake 0.3s;
}
```

## 5. 구현 계획

### Phase 1 (즉시)
- [ ] TextRenderer 공통 컴포넌트 생성
- [ ] 커서 애니메이션 구현
- [ ] 가독성 스타일 적용
- [ ] 오타 피드백 애니메이션

### Phase 2 (1주)
- [ ] 한글 조합 훅 통합
- [ ] 성능 최적화
- [ ] 진행 상태 UI 개선

### Phase 3 (2주)
- [ ] 접근성 기능
- [ ] 반응형 디자인
- [ ] 사용자 설정 기능

## 6. 테스트 계획
- 단위 테스트: 렌더링 로직
- 통합 테스트: 입력 처리
- E2E 테스트: 전체 타이핑 플로우
- 성능 테스트: 1000자 이상 텍스트

## 7. 성공 지표
- 첫 글자 입력까지 시간 10% 감소
- 오타 수정 시간 20% 감소
- 사용자 만족도 30% 향상